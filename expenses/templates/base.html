<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Expensio{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white font-sans antialiased">

    <header class="h-16 bg-black border-b border-gray-800 flex justify-between items-center px-8 fixed top-0 w-full z-50">
        
        <div class="text-2xl font-bold text-green-500 tracking-wide">
            Expensio
        </div>
    {% if user.is_authenticated %}
        <nav class="flex items-center gap-8">
            <div class="flex items-center gap-6 text-sm font-medium text-gray-400">
                <a href="{% url 'index' %}" class="hover:text-white transition-colors">Dashboard</a>
                <a href="{%url 'transaction_list' %}" class="hover:text-white transition-colors">Transactions</a>
                <a href="{%url 'about'%}" class="hover:text-white transition-colors">About</a>
            </div>
    
            <div class="flex items-center gap-4">

    
        <div class="relative">
            
            <button onclick="toggleDropdown()" class="w-10 h-10 rounded-full bg-green-600 text-white font-bold flex items-center justify-center hover:bg-green-700 transition focus:outline-none border-2 border-gray-800">
                {{ user.username.0|upper }}
            </button>

            <div id="profileDropdown" class="hidden absolute right-0 mt-2 w-48 bg-gray-900 border border-gray-800 rounded-xl shadow-2xl py-2 z-50">
                
                <div class="px-4 py-2 border-b border-gray-800">
                    <p class="text-sm text-gray-400">Signed in as</p>
                    <p class="text-white font-bold truncate">{{ user.username }}</p>
                </div>

                <a href="{%url 'profile'%}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition">
                    üë§ My Profile
                </a>
                <a href="#" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-800 hover:text-white transition">
                    ‚öôÔ∏è Settings
                </a>
                
                <form action="{% url 'logout' %}" method="post" class="border-t border-gray-800 mt-2">
                    {% csrf_token %}
                    <button type="submit" class="w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-gray-800 hover:text-red-400 transition">
                        üö™ Logout
                    </button>
                </form>
            </div>

        </div>

    {% else %}
    <div>
        <a  href="{% url 'login' %}" class="mx-4 hover:text-white font-medium transition">Login</a>
        <a href="{% url 'register' %}" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-medium transition">Sign Up</a>
    </div>
        {% endif %}

</div>
        </nav> 
    </header>

    <main class="pt-20 p-8 min-h-screen">
        {% block content %}
        {% endblock %}
    </main>
<script>
    function toggleDropdown() {
        const dropdown = document.getElementById('profileDropdown');
        dropdown.classList.toggle('hidden');
    }

    window.addEventListener('click', function(e) {
        const button = document.querySelector('button[onclick="toggleDropdown()"]');
        const dropdown = document.getElementById('profileDropdown');
        
        if (button && dropdown && !button.contains(e.target) && !dropdown.contains(e.target)) {
            dropdown.classList.add('hidden');
        }
    });
</script>
</body>
</html>